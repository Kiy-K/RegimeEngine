# ─────────────────────────────────────────────────────────────────────────── #
# GRAVITAS Engine — Moscow Scenario Configuration                              #
# ─────────────────────────────────────────────────────────────────────────── #
#
# Battle of Moscow (1941) with nonlinear combat, logistics network,
# and partisan warfare plugins.
#
# Use with: python cli.py run moscow --config configs/moscow.yaml
#           python cli.py run moscow --episodes 5
#

scenario: moscow
max_steps: 500
verbose: true

# ── Plugins ─────────────────────────────────────────────────────────────── #
# All three Moscow plugins activate together for the full experience.
# Order matters: combat runs first, then logistics, then partisans.

plugins:
  - nonlinear_combat
  - logistics_network
  - partisan_warfare

# ── Plugin-specific configuration ───────────────────────────────────────── #

plugin_configs:
  nonlinear_combat:
    diminishing_returns_alpha: 0.7    # m^0.7 — sublinear stacking
    breakthrough_threshold: 0.58      # Need >58% force ratio for breakthrough
    breakthrough_steepness: 8.0       # Sigmoid steepness
    breakthrough_sigma_damage: 0.06   # Max σ damage per step from breakthrough
    attrition_base: 0.03              # Base military attrition in combat
    hazard_combat_rate: 0.04          # Hazard increase from combat
    fatigue_midpoint: 120.0           # Combat turns before fatigue accelerates
    fatigue_rate: 0.025               # Fatigue sigmoid steepness
    fatigue_attrition_mult: 0.5       # Additional attrition from fatigue
    fog_variance_scale: 0.15          # Damage variance from fog of war

  logistics_network:
    production_threshold: 0.4         # σ threshold for production
    production_steepness: 10.0        # Sigmoid steepness
    distance_decay_rate: 0.3          # exp(-0.3 × hops) per hop
    winter_axis_penalty: 0.35         # Axis consumption multiplier in winter
    winter_soviet_penalty: 0.10       # Soviet consumption multiplier in winter
    winter_start_turn: 150            # Winter begins ~turn 150
    winter_end_turn: 400              # Winter ends ~turn 400
    sabotage_check_interval: 10       # Check for random sabotage every N turns
    disruption_duration: 12           # Turns a disrupted link stays broken
    congestion_factor: 0.8            # Diminishing returns on hub throughput

  partisan_warfare:
    recruitment_interval: 25          # Recruit every N turns
    action_interval: 8                # Partisans act every N turns
    max_partisans: 6                  # Maximum partisan units
    recruitment_resource_cost: 0.08   # Soviet resource cost per recruitment
    recruitment_base_strength: 0.12   # Base strength of new partisan
    sabotage_resource_damage: 0.12    # Resource damage from sabotage
    sabotage_hazard_boost: 0.10       # Hazard from sabotage
    ambush_military_damage: 0.06      # Military damage from ambush
    ambush_trust_damage: 0.04         # Trust erosion from ambush
    detection_base_prob: 0.12         # Base chance of detection per check
    detection_strength_loss: 0.30     # Strength loss when detected
    propaganda_trust_boost: 0.03      # Trust boost per propaganda action
    action_cooldown: 5                # Turns between partisan actions
